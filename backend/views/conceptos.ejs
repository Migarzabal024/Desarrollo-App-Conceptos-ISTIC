<h1>Listado de Conceptos</h1>

<a href="/conceptos/crear">
    <button style="background:#4CAF50; color:white; padding:10px 20px;">
        ‚ûï Crear nuevo concepto
    </button>
</a>

<% if (conceptos.length === 0) { %>
    <p style="text-align: center; color: #666; padding: 40px;">
        No hay conceptos cargados.
    </p>
<% } else { %>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Descripci√≥n</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <% conceptos.forEach(function(concepto) { %>
                <tr>
                    <td><%= concepto.id %></td>
                    <td><strong><%= concepto.nombre %></strong></td>
                    <td><%= concepto.descripcion %></td>
                    <td style="white-space: nowrap;">
                        <a href="/conceptos/editar/<%= concepto.id %>">
                            <button type="button" style="background:#2196F3; color:white; padding:8px 12px; border:none; border-radius:4px; cursor:pointer;">
                                ‚úèÔ∏è Editar
                            </button>
                        </a>
                        
                       <a href="/conceptos/eliminar/<%= concepto.id %>">
                            <button type="button" style="background:#f44336; color:white; padding:8px 12px; border:none; border-radius:4px; cursor:pointer; margin-left:5px;">
                                üóëÔ∏è Eliminar
                            </button>
                        </a>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>

    <button 
        type="button"
        id="btn-eliminar-todos"
        style="margin-top:30px; background:darkred; color:white; padding:12px 24px; font-size:16px; border:none; border-radius:4px; cursor:pointer;">
        üóëÔ∏è BORRAR TODOS LOS CONCEPTOS
    </button>
<% } %>

<script>
    document.addEventListener('DOMContentLoaded', function() {


        // Bot√≥n eliminar todos
        const btnEliminarTodos = document.getElementById('btn-eliminar-todos');
        if (btnEliminarTodos) {
            btnEliminarTodos.addEventListener('click', eliminarTodos);
        }
        });

    async function eliminarTodos() {
        if (!confirm('‚ö†Ô∏è ¬øELIMINAR TODOS LOS CONCEPTOS?\n\nEsta acci√≥n no se puede deshacer.')) {
            return;
        }
        
        try {
            const response = await fetch('/api/conceptos', {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            
            if (response.ok) {
                alert('‚úÖ Todos los conceptos han sido eliminados');
                window.location.reload();
            } else {
                const error = await response.json();
                alert('‚ùå Error: ' + (error.error || 'No se pudo eliminar'));
            }
        } catch (error) {
            console.error('Error:', error);
            alert('‚ùå Error de conexi√≥n al eliminar los conceptos');
        }
    }
</script>

<style>
    table {
        width: 100%;
        margin-top: 20px;
        border-collapse: collapse;
    }
    
    th, td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    
    th {
        background: #f8f9fa;
        font-weight: bold;
    }
    
    tr:hover {
        background: #f9f9f9;
    }
    
    button {
        transition: opacity 0.2s, transform 0.1s;
    }
    
    button:hover {
        opacity: 0.8;
        transform: translateY(-1px);
    }
    
    button:active {
        transform: translateY(0);
    }
</style>

<%- include("partials/footer") %>